(function() {
  var $fs, $path, Flapp, Flasset, Flbuild, Fllib, Flmodule, parseXml,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  $path = require('path');

  $fs = require('fs');

  parseXml = require('xml2js').parseString;

  Fllib = require('./fllib');

  Flapp = require('./flapp');

  Flmodule = require('./flmodule');

  Flasset = require('./flasset');

  Flbuild = (function() {
    function Flbuild() {
      this.getAssetCreator = __bind(this.getAssetCreator, this);
      this.getModuleCreator = __bind(this.getModuleCreator, this);
      this.getApplicationCreator = __bind(this.getApplicationCreator, this);
      this.getLibraryCreator = __bind(this.getLibraryCreator, this);
      this.resolvePaths = __bind(this.resolvePaths, this);
      this.resolvePath = __bind(this.resolvePath, this);
      this.getSDKVersion = __bind(this.getSDKVersion, this);
      this.getEnv = __bind(this.getEnv, this);
      this.applyEnv = __bind(this.applyEnv, this);
      this.setEnv = __bind(this.setEnv, this);
      this.getArgs = __bind(this.getArgs, this);
      this.getSourceDirectories = __bind(this.getSourceDirectories, this);
      this.getExternalLibraryDirectories = __bind(this.getExternalLibraryDirectories, this);
      this.getLibraryDirectories = __bind(this.getLibraryDirectories, this);
      this.addArg = __bind(this.addArg, this);
      this.addSourceDirectory = __bind(this.addSourceDirectory, this);
      this.addExternalLibraryDirectory = __bind(this.addExternalLibraryDirectory, this);
      this.addLibraryDirectory = __bind(this.addLibraryDirectory, this);
      this.envs = {};
      this.libraryDirectories = [];
      this.externalLibraryDirectories = [];
      this.sourceDirectories = [];
      this.args = ['-locale en_US'];
    }

    Flbuild.prototype.addLibraryDirectory = function(path) {
      return this.libraryDirectories.push(path);
    };

    Flbuild.prototype.addExternalLibraryDirectory = function(path) {
      return this.externalLibraryDirectories.push(path);
    };

    Flbuild.prototype.addSourceDirectory = function(path) {
      return this.sourceDirectories.push(path);
    };

    Flbuild.prototype.addArg = function(arg) {
      return this.args.push(arg);
    };

    Flbuild.prototype.getLibraryDirectories = function() {
      return this.libraryDirectories;
    };

    Flbuild.prototype.getExternalLibraryDirectories = function() {
      return this.externalLibraryDirectories;
    };

    Flbuild.prototype.getSourceDirectories = function() {
      return this.sourceDirectories;
    };

    Flbuild.prototype.getArgs = function() {
      return this.args;
    };

    Flbuild.prototype.setEnv = function(name, value) {
      if (value == null) {
        value = process.env[name];
      }
      return this.envs[name] = value;
    };

    Flbuild.prototype.applyEnv = function(str) {
      var name, reg, value, _ref;
      _ref = this.envs;
      for (name in _ref) {
        value = _ref[name];
        reg = new RegExp('\\$' + name, 'g');
        str = str.replace(reg, value);
      }
      return str;
    };

    Flbuild.prototype.getEnv = function(name) {
      return this.envs[name];
    };

    Flbuild.prototype.getSDKVersion = function(done) {
      var xmlstr;
      if (!this.sdkDescription) {
        xmlstr = $fs.readFileSync(this.getEnv('FLEX_HOME') + '/flex-sdk-description.xml', {
          encoding: 'utf8'
        });
        return parseXml(xmlstr, function(err, result) {
          this.sdkDescription = result;
          return done(this.sdkDescription.version);
        });
      } else {
        return done(this.sdkDescription.version);
      }
    };

    Flbuild.prototype.resolvePath = function(path) {
      path = this.applyEnv(path);
      return $path.resolve(path);
    };

    Flbuild.prototype.resolvePaths = function(paths) {
      var newPaths, path, _i, _len;
      newPaths = [];
      for (_i = 0, _len = paths.length; _i < _len; _i++) {
        path = paths[_i];
        newPaths.push(this.resolvePath(path));
      }
      return newPaths;
    };

    Flbuild.prototype.getLibraryCreator = function() {
      return new Fllib(this);
    };

    Flbuild.prototype.getApplicationCreator = function() {
      return new Flapp(this);
    };

    Flbuild.prototype.getModuleCreator = function() {
      return new Flmodule(this);
    };

    Flbuild.prototype.getAssetCreator = function() {
      return new Flasset(this);
    };

    Flbuild.prototype.wrap = function(path) {
      return "'" + path + "'";
    };

    Flbuild.prototype.getSwcListFromDirectory = function(path) {
      var file, files, swcs, _i, _len;
      swcs = [];
      if ($fs.existsSync(path)) {
        files = $fs.readdirSync(path);
        for (_i = 0, _len = files.length; _i < _len; _i++) {
          file = files[_i];
          if (file.lastIndexOf('.swc') > -1) {
            swcs.push($path.join(path, file));
          }
        }
      }
      return swcs;
    };

    Flbuild.prototype.classfy = function(file) {
      var classPath;
      classPath = file.relative_base.split('/').join('.') + '.' + file.name;
      if (classPath.charAt(0) === '.') {
        classPath = classPath.substr(1);
      }
      return classPath;
    };

    return Flbuild;

  })();

  module.exports = Flbuild;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LEdBQUcsQ0FBQyxXQUFKLENBQWdCLElBQWhCLENBQVIsQ0FBQTtBQUVBLGFBQUEsNENBQUE7MkJBQUE7QUFDQyxVQUFBLElBQUcsSUFBSSxDQUFDLFdBQUwsQ0FBaUIsTUFBakIsQ0FBQSxHQUEyQixDQUFBLENBQTlCO0FBQ0MsWUFBQSxJQUFJLENBQUMsSUFBTCxDQUFVLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBWCxFQUFpQixJQUFqQixDQUFWLENBQUEsQ0FERDtXQUREO0FBQUEsU0FIRDtPQURBO2FBT0EsS0FSd0I7SUFBQSxDQTdGekIsQ0FBQTs7QUFBQSxzQkF3R0EsT0FBQSxHQUFTLFNBQUMsSUFBRCxHQUFBO0FBQ1IsVUFBQSxTQUFBO0FBQUEsTUFBQSxTQUFBLEdBQVksSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFuQixDQUF5QixHQUF6QixDQUE2QixDQUFDLElBQTlCLENBQW1DLEdBQW5DLENBQUEsR0FBMEMsR0FBMUMsR0FBZ0QsSUFBSSxDQUFDLElBQWpFLENBQUE7QUFDQSxNQUFBLElBQW1DLFNBQVMsQ0FBQyxNQUFWLENBQWlCLENBQWpCLENBQUEsS0FBdUIsR0FBMUQ7QUFBQSxRQUFBLFNBQUEsR0FBWSxTQUFTLENBQUMsTUFBVixDQUFpQixDQUFqQixDQUFaLENBQUE7T0FEQTthQUVBLFVBSFE7SUFBQSxDQXhHVCxDQUFBOzttQkFBQTs7TUFWRCxDQUFBOztBQUFBLEVBdUhBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE9BdkhqQixDQUFBO0FBQUEiLCJmaWxlIjoiZmxidWlsZC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiRwYXRoID0gcmVxdWlyZSgncGF0aCcpXG4kZnMgPSByZXF1aXJlKCdmcycpXG5wYXJzZVhtbCA9IHJlcXVpcmUoJ3htbDJqcycpLnBhcnNlU3RyaW5nXG5cbkZsbGliID0gcmVxdWlyZSgnLi9mbGxpYicpXG5GbGFwcCA9IHJlcXVpcmUoJy4vZmxhcHAnKVxuRmxtb2R1bGUgPSByZXF1aXJlKCcuL2ZsbW9kdWxlJylcbkZsYXNzZXQgPSByZXF1aXJlKCcuL2ZsYXNzZXQnKVxuXG5jbGFzcyBGbGJ1aWxkXG5cdGNvbnN0cnVjdG9yOiAoKSAtPlxuXHRcdEBlbnZzID0ge31cblxuXHRcdEBsaWJyYXJ5RGlyZWN0b3JpZXMgPSBbXVxuXHRcdEBleHRlcm5hbExpYnJhcnlEaXJlY3RvcmllcyA9IFtdXG5cdFx0QHNvdXJjZURpcmVjdG9yaWVzID0gW11cblx0XHRAYXJncyA9IFsnLWxvY2FsZSBlbl9VUyddXG5cblx0Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIHNvdXJjZSBjb2xsZWN0XG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Iy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyBzZXR0ZXJzXG5cdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGFkZExpYnJhcnlEaXJlY3Rvcnk6IChwYXRoKSA9PlxuXHRcdEBsaWJyYXJ5RGlyZWN0b3JpZXMucHVzaChwYXRoKVxuXG5cdGFkZEV4dGVybmFsTGlicmFyeURpcmVjdG9yeTogKHBhdGgpID0+XG5cdFx0QGV4dGVybmFsTGlicmFyeURpcmVjdG9yaWVzLnB1c2gocGF0aClcblxuXHRhZGRTb3VyY2VEaXJlY3Rvcnk6IChwYXRoKSA9PlxuXHRcdEBzb3VyY2VEaXJlY3Rvcmllcy5wdXNoKHBhdGgpXG5cblx0YWRkQXJnOiAoYXJnKSA9PlxuXHRcdEBhcmdzLnB1c2goYXJnKVxuXG5cdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgZ2V0dGVyc1xuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRnZXRMaWJyYXJ5RGlyZWN0b3JpZXM6ID0+IEBsaWJyYXJ5RGlyZWN0b3JpZXNcblxuXHRnZXRFeHRlcm5hbExpYnJhcnlEaXJlY3RvcmllczogPT4gQGV4dGVybmFsTGlicmFyeURpcmVjdG9yaWVzXG5cblx0Z2V0U291cmNlRGlyZWN0b3JpZXM6ID0+IEBzb3VyY2VEaXJlY3Rvcmllc1xuXG5cdGdldEFyZ3M6ID0+IEBhcmdzXG5cblx0Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIGVudmlyb25tZW50IHZhcmlhYmxlcyBjb250cm9sXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0c2V0RW52OiAobmFtZSwgdmFsdWUpID0+XG5cdFx0dmFsdWUgPSBwcm9jZXNzLmVudltuYW1lXSBpZiBub3QgdmFsdWU/XG5cdFx0QGVudnNbbmFtZV0gPSB2YWx1ZVxuXG5cdGFwcGx5RW52OiAoc3RyKSA9PlxuXHRcdGZvciBuYW1lLCB2YWx1ZSBvZiBAZW52c1xuXHRcdFx0cmVnID0gbmV3IFJlZ0V4cCgnXFxcXCQnICsgbmFtZSwgJ2cnKVxuXHRcdFx0c3RyID0gc3RyLnJlcGxhY2UocmVnLCB2YWx1ZSlcblx0XHRzdHJcblxuXHRnZXRFbnY6IChuYW1lKSA9PlxuXHRcdEBlbnZzW25hbWVdXG5cblx0Z2V0U0RLVmVyc2lvbjogKGRvbmUpID0+XG5cdFx0aWYgbm90IEBzZGtEZXNjcmlwdGlvblxuXHRcdFx0eG1sc3RyID0gJGZzLnJlYWRGaWxlU3luYyhAZ2V0RW52KCdGTEVYX0hPTUUnKSArICcvZmxleC1zZGstZGVzY3JpcHRpb24ueG1sJywge2VuY29kaW5nOid1dGY4J30pXG5cdFx0XHRwYXJzZVhtbCB4bWxzdHIsIChlcnIsIHJlc3VsdCktPlxuXHRcdFx0XHRAc2RrRGVzY3JpcHRpb24gPSByZXN1bHRcblx0XHRcdFx0ZG9uZShAc2RrRGVzY3JpcHRpb24udmVyc2lvbilcblx0XHRlbHNlXG5cdFx0XHRkb25lKEBzZGtEZXNjcmlwdGlvbi52ZXJzaW9uKVxuXG5cblx0Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIHJlc29sdmUgcGF0aCBjb250cm9sIDogZGVwZW5kZW50IGVudmlyb25tZW50IHZhcmlhYmxlcyBjb250cm9sXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0cmVzb2x2ZVBhdGg6IChwYXRoKSA9PlxuXHRcdHBhdGggPSBAYXBwbHlFbnYocGF0aClcblx0XHQkcGF0aC5yZXNvbHZlKHBhdGgpXG5cblx0cmVzb2x2ZVBhdGhzOiAocGF0aHMpID0+XG5cdFx0bmV3UGF0aHMgPSBbXVxuXHRcdGZvciBwYXRoIGluIHBhdGhzXG5cdFx0XHRuZXdQYXRocy5wdXNoKEByZXNvbHZlUGF0aChwYXRoKSlcblx0XHRuZXdQYXRoc1xuXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0IyBjcmVhdGUgaW5zdGFuY2Vcblx0Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRnZXRMaWJyYXJ5Q3JlYXRvcjogKCkgPT4gbmV3IEZsbGliKEApXG5cblx0Z2V0QXBwbGljYXRpb25DcmVhdG9yOiAoKSA9PiBuZXcgRmxhcHAoQClcblxuXHRnZXRNb2R1bGVDcmVhdG9yOiAoKSA9PiBuZXcgRmxtb2R1bGUoQClcblxuXHRnZXRBc3NldENyZWF0b3I6ICgpID0+IG5ldyBGbGFzc2V0KEApXG5cblx0Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIHV0aWxzXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0d3JhcDogKHBhdGgpIC0+XG5cdFx0XCInI3twYXRofSdcIlxuXG5cdGdldFN3Y0xpc3RGcm9tRGlyZWN0b3J5OiAocGF0aCkgLT5cblx0XHRzd2NzID0gW11cblx0XHRpZiAkZnMuZXhpc3RzU3luYyhwYXRoKVxuXHRcdFx0ZmlsZXMgPSAkZnMucmVhZGRpclN5bmMocGF0aClcblxuXHRcdFx0Zm9yIGZpbGUgaW4gZmlsZXNcblx0XHRcdFx0aWYgZmlsZS5sYXN0SW5kZXhPZignLnN3YycpID4gLTFcblx0XHRcdFx0XHRzd2NzLnB1c2goJHBhdGguam9pbihwYXRoLCBmaWxlKSlcblx0XHRzd2NzXG5cblx0IyBmaWxlIGZyb20gcmVxdWlyZSgnZmlsZS1waWNrZXInKVxuXHRjbGFzc2Z5OiAoZmlsZSkgLT5cblx0XHRjbGFzc1BhdGggPSBmaWxlLnJlbGF0aXZlX2Jhc2Uuc3BsaXQoJy8nKS5qb2luKCcuJykgKyAnLicgKyBmaWxlLm5hbWVcblx0XHRjbGFzc1BhdGggPSBjbGFzc1BhdGguc3Vic3RyKDEpIGlmIGNsYXNzUGF0aC5jaGFyQXQoMCkgaXMgJy4nXG5cdFx0Y2xhc3NQYXRoXG5cbm1vZHVsZS5leHBvcnRzID0gRmxidWlsZCJdfQ==