(function() {
  var $fs, $path, Flapp, Flasset, Flbuild, Fldoc, Fllib, Flmodule, parseXml,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  $path = require('path');

  $fs = require('fs');

  parseXml = require('xml2js').parseString;

  Fllib = null;

  Flapp = null;

  Flmodule = null;

  Flasset = null;

  Fldoc = null;

  Flbuild = (function() {
    function Flbuild() {
      this.getDocCreator = __bind(this.getDocCreator, this);
      this.getAssetCreator = __bind(this.getAssetCreator, this);
      this.getModuleCreator = __bind(this.getModuleCreator, this);
      this.getApplicationCreator = __bind(this.getApplicationCreator, this);
      this.getLibraryCreator = __bind(this.getLibraryCreator, this);
      this.resolvePaths = __bind(this.resolvePaths, this);
      this.resolvePath = __bind(this.resolvePath, this);
      this.getSDKVersion = __bind(this.getSDKVersion, this);
      this.getEnv = __bind(this.getEnv, this);
      this.applyEnv = __bind(this.applyEnv, this);
      this.setEnv = __bind(this.setEnv, this);
      this.getArgs = __bind(this.getArgs, this);
      this.getSourceDirectories = __bind(this.getSourceDirectories, this);
      this.getExternalLibraryDirectories = __bind(this.getExternalLibraryDirectories, this);
      this.getLibraryDirectories = __bind(this.getLibraryDirectories, this);
      this.addArg = __bind(this.addArg, this);
      this.addSourceDirectory = __bind(this.addSourceDirectory, this);
      this.addExternalLibraryDirectory = __bind(this.addExternalLibraryDirectory, this);
      this.addLibraryDirectory = __bind(this.addLibraryDirectory, this);
      this.envs = {};
      this.libraryDirectories = [];
      this.externalLibraryDirectories = [];
      this.sourceDirectories = [];
      this.args = ['-locale en_US'];
    }

    Flbuild.prototype.addLibraryDirectory = function(path) {
      return this.libraryDirectories.push(path);
    };

    Flbuild.prototype.addExternalLibraryDirectory = function(path) {
      return this.externalLibraryDirectories.push(path);
    };

    Flbuild.prototype.addSourceDirectory = function(path) {
      return this.sourceDirectories.push(path);
    };

    Flbuild.prototype.addArg = function(arg) {
      return this.args.push(arg);
    };

    Flbuild.prototype.getLibraryDirectories = function() {
      return this.libraryDirectories;
    };

    Flbuild.prototype.getExternalLibraryDirectories = function() {
      return this.externalLibraryDirectories;
    };

    Flbuild.prototype.getSourceDirectories = function() {
      return this.sourceDirectories;
    };

    Flbuild.prototype.getArgs = function() {
      return this.args;
    };

    Flbuild.prototype.setEnv = function(name, value) {
      if (value == null) {
        value = process.env[name];
      }
      return this.envs[name] = value;
    };

    Flbuild.prototype.applyEnv = function(str) {
      var name, reg, value, _ref;
      _ref = this.envs;
      for (name in _ref) {
        value = _ref[name];
        reg = new RegExp('\\$' + name, 'g');
        str = str.replace(reg, value);
      }
      return str;
    };

    Flbuild.prototype.getEnv = function(name) {
      return this.envs[name];
    };

    Flbuild.prototype.getSDKVersion = function(done) {
      var xmlstr;
      if (!this.sdkDescription) {
        xmlstr = $fs.readFileSync(this.getEnv('FLEX_HOME') + '/flex-sdk-description.xml', {
          encoding: 'utf8'
        });
        return parseXml(xmlstr, function(err, result) {
          this.sdkDescription = result;
          return done(this.sdkDescription.version);
        });
      } else {
        return done(this.sdkDescription.version);
      }
    };

    Flbuild.prototype.resolvePath = function(path) {
      path = this.applyEnv(path);
      return $path.resolve(path);
    };

    Flbuild.prototype.resolvePaths = function(paths) {
      var newPaths, path, _i, _len;
      newPaths = [];
      for (_i = 0, _len = paths.length; _i < _len; _i++) {
        path = paths[_i];
        newPaths.push(this.resolvePath(path));
      }
      return newPaths;
    };

    Flbuild.prototype.getLibraryCreator = function() {
      if (Fllib == null) {
        Fllib = require('./fllib');
      }
      return new Fllib(this);
    };

    Flbuild.prototype.getApplicationCreator = function() {
      if (Flapp == null) {
        Flapp = require('./flapp');
      }
      return new Flapp(this);
    };

    Flbuild.prototype.getModuleCreator = function() {
      if (Flmodule == null) {
        Flmodule = require('./flmodule');
      }
      return new Flmodule(this);
    };

    Flbuild.prototype.getAssetCreator = function() {
      if (Flasset == null) {
        Flasset = require('./flasset');
      }
      return new Flasset(this);
    };

    Flbuild.prototype.getDocCreator = function() {
      var err, jsdom;
      if (Fldoc == null) {
        try {
          jsdom = require('jsdom');
          Fldoc = require('./fldoc');
        } catch (_error) {
          err = _error;
          console.error(err.message);
          console.error('Fldoc is need `jsdom` module. install `jsdom` module in your project.');
          process.exit(err.code);
        }
      }
      return new Fldoc(this);
    };

    Flbuild.prototype.isWindow = function() {
      return process.platform.indexOf('win') === 0;
    };

    Flbuild.prototype.wrap = function(path) {
      path = "\"" + path + "\"";
      if (this.isWindow()) {
        path.replace(/\//g, "\\");
      }
      return path;
    };

    Flbuild.prototype.getSwcListFromDirectory = function(path) {
      var file, files, swcs, _i, _len;
      swcs = [];
      if ($fs.existsSync(path)) {
        files = $fs.readdirSync(path);
        for (_i = 0, _len = files.length; _i < _len; _i++) {
          file = files[_i];
          if (file.lastIndexOf('.swc') > -1) {
            swcs.push($path.join(path, file));
          }
        }
      }
      return swcs;
    };

    Flbuild.prototype.classfy = function(file) {
      var classPath;
      classPath = file.relative_base.split('/').join('.') + '.' + file.name;
      if (classPath.charAt(0) === '.') {
        classPath = classPath.substr(1);
      }
      return classPath;
    };

    return Flbuild;

  })();

  module.exports = Flbuild;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QUMsVUFBSixDQUFlLElBQWYsQ0FBSDtBQUNDLFFBQUEsS0FBQSxHQUFRLEdBQUcsQ0FBQyxXQUFKLENBQWdCLElBQWhCLENBQVIsQ0FBQTtBQUVBLGFBQUEsNENBQUE7MkJBQUE7QUFDQyxVQUFBLElBQUcsSUFBSSxDQUFDLFdBQUwsQ0FBaUIsTUFBakIsQ0FBQSxHQUEyQixDQUFBLENBQTlCO0FBQ0MsWUFBQSxJQUFJLENBQUMsSUFBTCxDQUFVLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBWCxFQUFpQixJQUFqQixDQUFWLENBQUEsQ0FERDtXQUREO0FBQUEsU0FIRDtPQURBO2FBT0EsS0FSd0I7SUFBQSxDQXJIekIsQ0FBQTs7QUFBQSxzQkFnSUEsT0FBQSxHQUFTLFNBQUMsSUFBRCxHQUFBO0FBQ1IsVUFBQSxTQUFBO0FBQUEsTUFBQSxTQUFBLEdBQVksSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFuQixDQUF5QixHQUF6QixDQUE2QixDQUFDLElBQTlCLENBQW1DLEdBQW5DLENBQUEsR0FBMEMsR0FBMUMsR0FBZ0QsSUFBSSxDQUFDLElBQWpFLENBQUE7QUFDQSxNQUFBLElBQW1DLFNBQVMsQ0FBQyxNQUFWLENBQWlCLENBQWpCLENBQUEsS0FBdUIsR0FBMUQ7QUFBQSxRQUFBLFNBQUEsR0FBWSxTQUFTLENBQUMsTUFBVixDQUFpQixDQUFqQixDQUFaLENBQUE7T0FEQTthQUVBLFVBSFE7SUFBQSxDQWhJVCxDQUFBOzttQkFBQTs7TUFYRCxDQUFBOztBQUFBLEVBZ0pBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE9BaEpqQixDQUFBO0FBQUEiLCJmaWxlIjoiZmxidWlsZC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiRwYXRoID0gcmVxdWlyZSgncGF0aCcpXG4kZnMgPSByZXF1aXJlKCdmcycpXG5wYXJzZVhtbCA9IHJlcXVpcmUoJ3htbDJqcycpLnBhcnNlU3RyaW5nXG5cbkZsbGliID0gbnVsbFxuRmxhcHAgPSBudWxsXG5GbG1vZHVsZSA9IG51bGxcbkZsYXNzZXQgPSBudWxsXG5GbGRvYyA9IG51bGxcblxuY2xhc3MgRmxidWlsZFxuXHRjb25zdHJ1Y3RvcjogKCkgLT5cblx0XHRAZW52cyA9IHt9XG5cblx0XHRAbGlicmFyeURpcmVjdG9yaWVzID0gW11cblx0XHRAZXh0ZXJuYWxMaWJyYXJ5RGlyZWN0b3JpZXMgPSBbXVxuXHRcdEBzb3VyY2VEaXJlY3RvcmllcyA9IFtdXG5cdFx0QGFyZ3MgPSBbJy1sb2NhbGUgZW5fVVMnXVxuXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0IyBzb3VyY2UgY29sbGVjdFxuXHQjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgc2V0dGVyc1xuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRhZGRMaWJyYXJ5RGlyZWN0b3J5OiAocGF0aCkgPT5cblx0XHRAbGlicmFyeURpcmVjdG9yaWVzLnB1c2gocGF0aClcblxuXHRhZGRFeHRlcm5hbExpYnJhcnlEaXJlY3Rvcnk6IChwYXRoKSA9PlxuXHRcdEBleHRlcm5hbExpYnJhcnlEaXJlY3Rvcmllcy5wdXNoKHBhdGgpXG5cblx0YWRkU291cmNlRGlyZWN0b3J5OiAocGF0aCkgPT5cblx0XHRAc291cmNlRGlyZWN0b3JpZXMucHVzaChwYXRoKVxuXG5cdGFkZEFyZzogKGFyZykgPT5cblx0XHRAYXJncy5wdXNoKGFyZylcblxuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIGdldHRlcnNcblx0Iy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Z2V0TGlicmFyeURpcmVjdG9yaWVzOiA9PiBAbGlicmFyeURpcmVjdG9yaWVzXG5cblx0Z2V0RXh0ZXJuYWxMaWJyYXJ5RGlyZWN0b3JpZXM6ID0+IEBleHRlcm5hbExpYnJhcnlEaXJlY3Rvcmllc1xuXG5cdGdldFNvdXJjZURpcmVjdG9yaWVzOiA9PiBAc291cmNlRGlyZWN0b3JpZXNcblxuXHRnZXRBcmdzOiA9PiBAYXJnc1xuXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0IyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgY29udHJvbFxuXHQjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdHNldEVudjogKG5hbWUsIHZhbHVlKSA9PlxuXHRcdHZhbHVlID0gcHJvY2Vzcy5lbnZbbmFtZV0gaWYgbm90IHZhbHVlP1xuXHRcdEBlbnZzW25hbWVdID0gdmFsdWVcblxuXHRhcHBseUVudjogKHN0cikgPT5cblx0XHRmb3IgbmFtZSwgdmFsdWUgb2YgQGVudnNcblx0XHRcdHJlZyA9IG5ldyBSZWdFeHAoJ1xcXFwkJyArIG5hbWUsICdnJylcblx0XHRcdHN0ciA9IHN0ci5yZXBsYWNlKHJlZywgdmFsdWUpXG5cdFx0c3RyXG5cblx0Z2V0RW52OiAobmFtZSkgPT5cblx0XHRAZW52c1tuYW1lXVxuXG5cdGdldFNES1ZlcnNpb246IChkb25lKSA9PlxuXHRcdGlmIG5vdCBAc2RrRGVzY3JpcHRpb25cblx0XHRcdHhtbHN0ciA9ICRmcy5yZWFkRmlsZVN5bmMoQGdldEVudignRkxFWF9IT01FJykgKyAnL2ZsZXgtc2RrLWRlc2NyaXB0aW9uLnhtbCcsIHtlbmNvZGluZzondXRmOCd9KVxuXHRcdFx0cGFyc2VYbWwgeG1sc3RyLCAoZXJyLCByZXN1bHQpLT5cblx0XHRcdFx0QHNka0Rlc2NyaXB0aW9uID0gcmVzdWx0XG5cdFx0XHRcdGRvbmUoQHNka0Rlc2NyaXB0aW9uLnZlcnNpb24pXG5cdFx0ZWxzZVxuXHRcdFx0ZG9uZShAc2RrRGVzY3JpcHRpb24udmVyc2lvbilcblxuXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0IyByZXNvbHZlIHBhdGggY29udHJvbCA6IGRlcGVuZGVudCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgY29udHJvbFxuXHQjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdHJlc29sdmVQYXRoOiAocGF0aCkgPT5cblx0XHRwYXRoID0gQGFwcGx5RW52KHBhdGgpXG5cdFx0JHBhdGgucmVzb2x2ZShwYXRoKVxuXG5cdHJlc29sdmVQYXRoczogKHBhdGhzKSA9PlxuXHRcdG5ld1BhdGhzID0gW11cblx0XHRmb3IgcGF0aCBpbiBwYXRoc1xuXHRcdFx0bmV3UGF0aHMucHVzaChAcmVzb2x2ZVBhdGgocGF0aCkpXG5cdFx0bmV3UGF0aHNcblxuXHQjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCMgY3JlYXRlIGluc3RhbmNlXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Z2V0TGlicmFyeUNyZWF0b3I6ICgpID0+IFxuXHRcdEZsbGliID0gcmVxdWlyZSgnLi9mbGxpYicpIGlmIG5vdCBGbGxpYj9cblx0XHRuZXcgRmxsaWIoQClcblxuXHRnZXRBcHBsaWNhdGlvbkNyZWF0b3I6ICgpID0+IFxuXHRcdEZsYXBwID0gcmVxdWlyZSgnLi9mbGFwcCcpIGlmIG5vdCBGbGFwcD9cblx0XHRuZXcgRmxhcHAoQClcblxuXHRnZXRNb2R1bGVDcmVhdG9yOiAoKSA9PiBcblx0XHRGbG1vZHVsZSA9IHJlcXVpcmUoJy4vZmxtb2R1bGUnKSBpZiBub3QgRmxtb2R1bGU/XG5cdFx0bmV3IEZsbW9kdWxlKEApXG5cblx0Z2V0QXNzZXRDcmVhdG9yOiAoKSA9PiBcblx0XHRGbGFzc2V0ID0gcmVxdWlyZSgnLi9mbGFzc2V0JykgaWYgbm90IEZsYXNzZXQ/XG5cdFx0bmV3IEZsYXNzZXQoQClcblx0XG5cdGdldERvY0NyZWF0b3I6ICgpID0+IFxuXHRcdGlmIG5vdCBGbGRvYz9cblx0XHRcdHRyeSBcblx0XHRcdFx0anNkb20gPSByZXF1aXJlKCdqc2RvbScpXG5cdFx0XHRcdEZsZG9jID0gcmVxdWlyZSgnLi9mbGRvYycpXG5cdFx0XHRjYXRjaCBlcnJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnIubWVzc2FnZSlcblx0XHRcdFx0Y29uc29sZS5lcnJvcignRmxkb2MgaXMgbmVlZCBganNkb21gIG1vZHVsZS4gaW5zdGFsbCBganNkb21gIG1vZHVsZSBpbiB5b3VyIHByb2plY3QuJylcblx0XHRcdFx0cHJvY2Vzcy5leGl0KGVyci5jb2RlKVxuXHRcdFxuXHRcdG5ldyBGbGRvYyhAKVxuXG5cdCM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0IyB1dGlsc1xuXHQjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdGlzV2luZG93OiAoKSAtPiBwcm9jZXNzLnBsYXRmb3JtLmluZGV4T2YoJ3dpbicpIGlzIDBcblx0XG5cdHdyYXA6IChwYXRoKSAtPlxuXHRcdHBhdGggPSBcIlxcXCIje3BhdGh9XFxcIlwiXG5cdFx0cGF0aC5yZXBsYWNlKC9cXC8vZywgXCJcXFxcXCIpIGlmIEBpc1dpbmRvdygpXG5cdFx0cmV0dXJuIHBhdGhcblxuXHRnZXRTd2NMaXN0RnJvbURpcmVjdG9yeTogKHBhdGgpIC0+XG5cdFx0c3djcyA9IFtdXG5cdFx0aWYgJGZzLmV4aXN0c1N5bmMocGF0aClcblx0XHRcdGZpbGVzID0gJGZzLnJlYWRkaXJTeW5jKHBhdGgpXG5cblx0XHRcdGZvciBmaWxlIGluIGZpbGVzXG5cdFx0XHRcdGlmIGZpbGUubGFzdEluZGV4T2YoJy5zd2MnKSA+IC0xXG5cdFx0XHRcdFx0c3djcy5wdXNoKCRwYXRoLmpvaW4ocGF0aCwgZmlsZSkpXG5cdFx0c3djc1xuXG5cdCMgZmlsZSBmcm9tIHJlcXVpcmUoJ2ZpbGUtcGlja2VyJylcblx0Y2xhc3NmeTogKGZpbGUpIC0+XG5cdFx0Y2xhc3NQYXRoID0gZmlsZS5yZWxhdGl2ZV9iYXNlLnNwbGl0KCcvJykuam9pbignLicpICsgJy4nICsgZmlsZS5uYW1lXG5cdFx0Y2xhc3NQYXRoID0gY2xhc3NQYXRoLnN1YnN0cigxKSBpZiBjbGFzc1BhdGguY2hhckF0KDApIGlzICcuJ1xuXHRcdGNsYXNzUGF0aFxuXG5tb2R1bGUuZXhwb3J0cyA9IEZsYnVpbGQiXX0=