(function() {
  var $fs, $path, Flapp, Flbuild, Fllib, Flmodule, parseXml,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  $path = require('path');

  $fs = require('fs');

  parseXml = require('xml2js').parseString;

  Fllib = require('./fllib');

  Flapp = require('./flapp');

  Flmodule = require('./flmodule');

  Flbuild = (function() {
    function Flbuild() {
      this.getModuleCreator = __bind(this.getModuleCreator, this);
      this.getApplicationCreator = __bind(this.getApplicationCreator, this);
      this.getLibraryCreator = __bind(this.getLibraryCreator, this);
      this.resolvePaths = __bind(this.resolvePaths, this);
      this.resolvePath = __bind(this.resolvePath, this);
      this.getSDKVersion = __bind(this.getSDKVersion, this);
      this.getEnv = __bind(this.getEnv, this);
      this.applyEnv = __bind(this.applyEnv, this);
      this.setEnv = __bind(this.setEnv, this);
      this.getArgs = __bind(this.getArgs, this);
      this.getSourceDirectories = __bind(this.getSourceDirectories, this);
      this.getExternalLibraryDirectories = __bind(this.getExternalLibraryDirectories, this);
      this.getLibraryDirectories = __bind(this.getLibraryDirectories, this);
      this.addArg = __bind(this.addArg, this);
      this.addSourceDirectory = __bind(this.addSourceDirectory, this);
      this.addExternalLibraryDirectory = __bind(this.addExternalLibraryDirectory, this);
      this.addLibraryDirectory = __bind(this.addLibraryDirectory, this);
      this.envs = {};
      this.libraryDirectories = [];
      this.externalLibraryDirectories = [];
      this.sourceDirectories = [];
      this.args = ['-locale en_US'];
    }

    Flbuild.prototype.addLibraryDirectory = function(path) {
      return this.libraryDirectories.push(path);
    };

    Flbuild.prototype.addExternalLibraryDirectory = function(path) {
      return this.externalLibraryDirectories.push(path);
    };

    Flbuild.prototype.addSourceDirectory = function(path) {
      return this.sourceDirectories.push(path);
    };

    Flbuild.prototype.addArg = function(arg) {
      return this.args.push(arg);
    };

    Flbuild.prototype.getLibraryDirectories = function() {
      return this.libraryDirectories;
    };

    Flbuild.prototype.getExternalLibraryDirectories = function() {
      return this.externalLibraryDirectories;
    };

    Flbuild.prototype.getSourceDirectories = function() {
      return this.sourceDirectories;
    };

    Flbuild.prototype.getArgs = function() {
      return this.args;
    };

    Flbuild.prototype.setEnv = function(name, value) {
      if (value == null) {
        value = process.env[name];
      }
      return this.envs[name] = value;
    };

    Flbuild.prototype.applyEnv = function(str) {
      var name, reg, value, _ref;
      _ref = this.envs;
      for (name in _ref) {
        value = _ref[name];
        reg = new RegExp('\\$' + name, 'g');
        str = str.replace(reg, value);
      }
      return str;
    };

    Flbuild.prototype.getEnv = function(name) {
      return this.envs[name];
    };

    Flbuild.prototype.getSDKVersion = function(done) {
      var xmlstr;
      if (!this.sdkDescription) {
        xmlstr = $fs.readFileSync(this.getEnv('FLEX_HOME') + '/flex-sdk-description.xml', {
          encoding: 'utf8'
        });
        return parseXml(xmlstr, function(err, result) {
          this.sdkDescription = result;
          return done(this.sdkDescription.version);
        });
      } else {
        return done(this.sdkDescription.version);
      }
    };

    Flbuild.prototype.resolvePath = function(path) {
      path = this.applyEnv(path);
      return $path.resolve(path);
    };

    Flbuild.prototype.resolvePaths = function(paths) {
      var newPaths, path, _i, _len;
      newPaths = [];
      for (_i = 0, _len = paths.length; _i < _len; _i++) {
        path = paths[_i];
        newPaths.push(this.resolvePath(path));
      }
      return newPaths;
    };

    Flbuild.prototype.getLibraryCreator = function() {
      return new Fllib(this);
    };

    Flbuild.prototype.getApplicationCreator = function() {
      return new Flapp(this);
    };

    Flbuild.prototype.getModuleCreator = function() {
      return new Flmodule(this);
    };

    Flbuild.prototype.wrap = function(path) {
      return "'" + path + "'";
    };

    Flbuild.prototype.getSwcListFromDirectory = function(path) {
      var file, files, swcs, _i, _len;
      swcs = [];
      if ($fs.existsSync(path)) {
        files = $fs.readdirSync(path);
        for (_i = 0, _len = files.length; _i < _len; _i++) {
          file = files[_i];
          if (file.lastIndexOf('.swc') > -1) {
            swcs.push($path.join(path, file));
          }
        }
      }
      return swcs;
    };

    Flbuild.prototype.classfy = function(file) {
      var classPath;
      classPath = file.relative_base.split('/').join('.') + '.' + file.name;
      if (classPath.charAt(0) === '.') {
        classPath = classPath.substr(1);
      }
      return classPath;
    };

    return Flbuild;

  })();

  module.exports = Flbuild;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LElBQUwsQ0FBVSxLQUFLLENBQUMsSUFBTixDQUFXLElBQVgsRUFBaUIsSUFBakIsQ0FBVixDQUFBLENBREQ7V0FERDtBQUFBLFNBSEQ7T0FEQTthQU9BLEtBUndCO0lBQUEsQ0EzRnpCLENBQUE7O0FBQUEsc0JBc0dBLE9BQUEsR0FBUyxTQUFDLElBQUQsR0FBQTtBQUNSLFVBQUEsU0FBQTtBQUFBLE1BQUEsU0FBQSxHQUFZLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBbkIsQ0FBeUIsR0FBekIsQ0FBNkIsQ0FBQyxJQUE5QixDQUFtQyxHQUFuQyxDQUFBLEdBQTBDLEdBQTFDLEdBQWdELElBQUksQ0FBQyxJQUFqRSxDQUFBO0FBQ0EsTUFBQSxJQUFtQyxTQUFTLENBQUMsTUFBVixDQUFpQixDQUFqQixDQUFBLEtBQXVCLEdBQTFEO0FBQUEsUUFBQSxTQUFBLEdBQVksU0FBUyxDQUFDLE1BQVYsQ0FBaUIsQ0FBakIsQ0FBWixDQUFBO09BREE7YUFFQSxVQUhRO0lBQUEsQ0F0R1QsQ0FBQTs7bUJBQUE7O01BVEQsQ0FBQTs7QUFBQSxFQW9IQSxNQUFNLENBQUMsT0FBUCxHQUFpQixPQXBIakIsQ0FBQTtBQUFBIiwiZmlsZSI6ImZsYnVpbGQuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIkcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxuJGZzID0gcmVxdWlyZSgnZnMnKVxucGFyc2VYbWwgPSByZXF1aXJlKCd4bWwyanMnKS5wYXJzZVN0cmluZ1xuXG5GbGxpYiA9IHJlcXVpcmUoJy4vZmxsaWInKVxuRmxhcHAgPSByZXF1aXJlKCcuL2ZsYXBwJylcbkZsbW9kdWxlID0gcmVxdWlyZSgnLi9mbG1vZHVsZScpXG5cbmNsYXNzIEZsYnVpbGRcblx0Y29uc3RydWN0b3I6ICgpIC0+XG5cdFx0QGVudnMgPSB7fVxuXG5cdFx0QGxpYnJhcnlEaXJlY3RvcmllcyA9IFtdXG5cdFx0QGV4dGVybmFsTGlicmFyeURpcmVjdG9yaWVzID0gW11cblx0XHRAc291cmNlRGlyZWN0b3JpZXMgPSBbXVxuXHRcdEBhcmdzID0gWyctbG9jYWxlIGVuX1VTJ11cblxuXHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCMgc291cmNlIGNvbGxlY3Rcblx0IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIHNldHRlcnNcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0YWRkTGlicmFyeURpcmVjdG9yeTogKHBhdGgpID0+XG5cdFx0QGxpYnJhcnlEaXJlY3Rvcmllcy5wdXNoKHBhdGgpXG5cblx0YWRkRXh0ZXJuYWxMaWJyYXJ5RGlyZWN0b3J5OiAocGF0aCkgPT5cblx0XHRAZXh0ZXJuYWxMaWJyYXJ5RGlyZWN0b3JpZXMucHVzaChwYXRoKVxuXG5cdGFkZFNvdXJjZURpcmVjdG9yeTogKHBhdGgpID0+XG5cdFx0QHNvdXJjZURpcmVjdG9yaWVzLnB1c2gocGF0aClcblxuXHRhZGRBcmc6IChhcmcpID0+XG5cdFx0QGFyZ3MucHVzaChhcmcpXG5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyBnZXR0ZXJzXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGdldExpYnJhcnlEaXJlY3RvcmllczogPT4gQGxpYnJhcnlEaXJlY3Rvcmllc1xuXG5cdGdldEV4dGVybmFsTGlicmFyeURpcmVjdG9yaWVzOiA9PiBAZXh0ZXJuYWxMaWJyYXJ5RGlyZWN0b3JpZXNcblxuXHRnZXRTb3VyY2VEaXJlY3RvcmllczogPT4gQHNvdXJjZURpcmVjdG9yaWVzXG5cblx0Z2V0QXJnczogPT4gQGFyZ3NcblxuXHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGNvbnRyb2xcblx0IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRzZXRFbnY6IChuYW1lLCB2YWx1ZSkgPT5cblx0XHR2YWx1ZSA9IHByb2Nlc3MuZW52W25hbWVdIGlmIG5vdCB2YWx1ZT9cblx0XHRAZW52c1tuYW1lXSA9IHZhbHVlXG5cblx0YXBwbHlFbnY6IChzdHIpID0+XG5cdFx0Zm9yIG5hbWUsIHZhbHVlIG9mIEBlbnZzXG5cdFx0XHRyZWcgPSBuZXcgUmVnRXhwKCdcXFxcJCcgKyBuYW1lLCAnZycpXG5cdFx0XHRzdHIgPSBzdHIucmVwbGFjZShyZWcsIHZhbHVlKVxuXHRcdHN0clxuXG5cdGdldEVudjogKG5hbWUpID0+XG5cdFx0QGVudnNbbmFtZV1cblxuXHRnZXRTREtWZXJzaW9uOiAoZG9uZSkgPT5cblx0XHRpZiBub3QgQHNka0Rlc2NyaXB0aW9uXG5cdFx0XHR4bWxzdHIgPSAkZnMucmVhZEZpbGVTeW5jKEBnZXRFbnYoJ0ZMRVhfSE9NRScpICsgJy9mbGV4LXNkay1kZXNjcmlwdGlvbi54bWwnLCB7ZW5jb2Rpbmc6J3V0ZjgnfSlcblx0XHRcdHBhcnNlWG1sIHhtbHN0ciwgKGVyciwgcmVzdWx0KS0+XG5cdFx0XHRcdEBzZGtEZXNjcmlwdGlvbiA9IHJlc3VsdFxuXHRcdFx0XHRkb25lKEBzZGtEZXNjcmlwdGlvbi52ZXJzaW9uKVxuXHRcdGVsc2Vcblx0XHRcdGRvbmUoQHNka0Rlc2NyaXB0aW9uLnZlcnNpb24pXG5cblxuXHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCMgcmVzb2x2ZSBwYXRoIGNvbnRyb2wgOiBkZXBlbmRlbnQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGNvbnRyb2xcblx0IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRyZXNvbHZlUGF0aDogKHBhdGgpID0+XG5cdFx0cGF0aCA9IEBhcHBseUVudihwYXRoKVxuXHRcdCRwYXRoLnJlc29sdmUocGF0aClcblxuXHRyZXNvbHZlUGF0aHM6IChwYXRocykgPT5cblx0XHRuZXdQYXRocyA9IFtdXG5cdFx0Zm9yIHBhdGggaW4gcGF0aHNcblx0XHRcdG5ld1BhdGhzLnB1c2goQHJlc29sdmVQYXRoKHBhdGgpKVxuXHRcdG5ld1BhdGhzXG5cblx0IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIGNyZWF0ZSBpbnN0YW5jZVxuXHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdGdldExpYnJhcnlDcmVhdG9yOiAoKSA9PiBuZXcgRmxsaWIoQClcblxuXHRnZXRBcHBsaWNhdGlvbkNyZWF0b3I6ICgpID0+IG5ldyBGbGFwcChAKVxuXG5cdGdldE1vZHVsZUNyZWF0b3I6ICgpID0+IG5ldyBGbG1vZHVsZShAKVxuXG5cdCMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0IyB1dGlsc1xuXHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdHdyYXA6IChwYXRoKSAtPlxuXHRcdFwiJyN7cGF0aH0nXCJcblxuXHRnZXRTd2NMaXN0RnJvbURpcmVjdG9yeTogKHBhdGgpIC0+XG5cdFx0c3djcyA9IFtdXG5cdFx0aWYgJGZzLmV4aXN0c1N5bmMocGF0aClcblx0XHRcdGZpbGVzID0gJGZzLnJlYWRkaXJTeW5jKHBhdGgpXG5cblx0XHRcdGZvciBmaWxlIGluIGZpbGVzXG5cdFx0XHRcdGlmIGZpbGUubGFzdEluZGV4T2YoJy5zd2MnKSA+IC0xXG5cdFx0XHRcdFx0c3djcy5wdXNoKCRwYXRoLmpvaW4ocGF0aCwgZmlsZSkpXG5cdFx0c3djc1xuXG5cdCMgZmlsZSBmcm9tIHJlcXVpcmUoJ2ZpbGUtcGlja2VyJylcblx0Y2xhc3NmeTogKGZpbGUpIC0+XG5cdFx0Y2xhc3NQYXRoID0gZmlsZS5yZWxhdGl2ZV9iYXNlLnNwbGl0KCcvJykuam9pbignLicpICsgJy4nICsgZmlsZS5uYW1lXG5cdFx0Y2xhc3NQYXRoID0gY2xhc3NQYXRoLnN1YnN0cigxKSBpZiBjbGFzc1BhdGguY2hhckF0KDApIGlzICcuJ1xuXHRcdGNsYXNzUGF0aFxuXG5tb2R1bGUuZXhwb3J0cyA9IEZsYnVpbGQiXX0=