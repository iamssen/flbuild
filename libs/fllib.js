(function() {
  var $path, Fllib, SourceCollector, async, exec, fs, pick,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  fs = require('fs');

  $path = require('path');

  async = require('async');

  exec = require('done-exec');

  pick = require('file-picker').pick;

  SourceCollector = require('./flutils').SourceCollector;

  Fllib = (function() {
    function Fllib(build) {
      this.create = __bind(this.create, this);
      this.createBuildCommand = __bind(this.createBuildCommand, this);
      this.addArg = __bind(this.addArg, this);
      this.addSourceDirectory = __bind(this.addSourceDirectory, this);
      this.addExternalLibraryDirectory = __bind(this.addExternalLibraryDirectory, this);
      this.addLibraryDirectory = __bind(this.addLibraryDirectory, this);
      this.setFilterFunction = __bind(this.setFilterFunction, this);
      this.collector = new SourceCollector(build);
      this.build = build;
    }

    Fllib.prototype.setFilterFunction = function(func) {
      return this.filterFunction = func;
    };

    Fllib.prototype.addLibraryDirectory = function(path) {
      return this.collector.addLibraryDirectory(path);
    };

    Fllib.prototype.addExternalLibraryDirectory = function(path) {
      return this.collector.addExternalLibraryDirectory(path);
    };

    Fllib.prototype.addSourceDirectory = function(path) {
      return this.collector.addSourceDirectory(path);
    };

    Fllib.prototype.addArg = function(arg) {
      return this.collector.addArg(arg);
    };

    Fllib.prototype.createBuildCommand = function(output, complete) {
      var bin;
      bin = 'compc';
      return this.build.getSDKVersion((function(_this) {
        return function(version) {
          var args, directory, library, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2;
          if (_this.build.isWindow()) {
            if (version > '4.6.0') {
              bin = 'compc.bat';
            } else {
              bin = 'compc.exe';
            }
          }
          args = [];
          args.push(_this.build.wrap($path.join(_this.build.getEnv('FLEX_HOME'), 'bin', bin)));
          _ref = _this.collector.getLibraries();
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            library = _ref[_i];
            args.push('-library-path ' + _this.build.wrap(library));
          }
          _ref1 = _this.collector.getExternalLibraries();
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            library = _ref1[_j];
            args.push('-external-library-path ' + _this.build.wrap(library));
          }
          _ref2 = _this.collector.getSourceDirectories();
          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
            directory = _ref2[_k];
            args.push('-source-path ' + _this.build.wrap(directory));
          }
          return _this.collector.getIncludeClasses(_this.filterFunction, function(classPaths) {
            args.push('-include-classes ' + classPaths.join(' '));
            return _this.collector.getManifest(function(namespaces) {
              var arg, component, components, manifestCount, manifestFile, manifestSource, namespace, _l, _len3, _len4, _m, _ref3;
              manifestCount = 0;
              for (namespace in namespaces) {
                components = namespaces[namespace];
                manifestSource = '<?xml version="1.0" encoding="utf-8"?>\n';
                manifestSource += '<componentPackage>\n';
                for (_l = 0, _len3 = components.length; _l < _len3; _l++) {
                  component = components[_l];
                  if (classPaths.indexOf(component.path) > -1) {
                    manifestSource += "<component id='" + component.name + "' class='" + component.path + "'/>\n";
                  }
                }
                manifestSource += '</componentPackage>';
                manifestFile = "manifest" + manifestCount + ".xml";
                fs.writeFileSync(manifestFile, manifestSource, {
                  encoding: 'utf8'
                });
                args.push("-namespace " + namespace + " " + manifestFile);
                args.push("-include-namespaces " + namespace);
                manifestCount++;
              }
              _ref3 = _this.collector.getArgs();
              for (_m = 0, _len4 = _ref3.length; _m < _len4; _m++) {
                arg = _ref3[_m];
                args.push(_this.build.applyEnv(arg));
              }
              args.push('-output ' + _this.build.wrap(_this.build.resolvePath(output)));
              if (complete != null) {
                return complete(args.join(' '));
              }
            });
          });
        };
      })(this));
    };

    Fllib.prototype.create = function(output, complete) {
      return this.createBuildCommand(output, function(command) {
        return exec(command).run(complete);
      });
    };

    return Fllib;

  })();

  module.exports = Fllib;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QixRQUFsQixFQUQyQjtNQUFBLENBQTVCLEVBRE87SUFBQSxDQWhIUixDQUFBOztpQkFBQTs7TUFSRCxDQUFBOztBQUFBLEVBNEhBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLEtBNUhqQixDQUFBO0FBQUEiLCJmaWxlIjoiZmxsaWIuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJmcyA9IHJlcXVpcmUoJ2ZzJylcbiRwYXRoID0gcmVxdWlyZSgncGF0aCcpXG5hc3luYyA9IHJlcXVpcmUoJ2FzeW5jJylcbmV4ZWMgPSByZXF1aXJlKCdkb25lLWV4ZWMnKVxucGljayA9IHJlcXVpcmUoJ2ZpbGUtcGlja2VyJykucGlja1xue1NvdXJjZUNvbGxlY3Rvcn0gPSByZXF1aXJlKCcuL2ZsdXRpbHMnKVxuXG5jbGFzcyBGbGxpYlxuXHRjb25zdHJ1Y3RvcjogKGJ1aWxkKSAtPlxuXHRcdEBjb2xsZWN0b3IgPSBuZXcgU291cmNlQ29sbGVjdG9yKGJ1aWxkKVxuXHRcdEBidWlsZCA9IGJ1aWxkXG5cblx0Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIHNldHRpbmdcblx0Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQjIEBwYXJhbSBmdW5jIGBib29sZWFuIGZ1bmN0aW9uKGZpbGUpYFxuXHRzZXRGaWx0ZXJGdW5jdGlvbjogKGZ1bmMpID0+XG5cdFx0QGZpbHRlckZ1bmN0aW9uID0gZnVuY1xuXG5cdGFkZExpYnJhcnlEaXJlY3Rvcnk6IChwYXRoKSA9PlxuXHRcdEBjb2xsZWN0b3IuYWRkTGlicmFyeURpcmVjdG9yeShwYXRoKVxuXG5cdGFkZEV4dGVybmFsTGlicmFyeURpcmVjdG9yeTogKHBhdGgpID0+XG5cdFx0QGNvbGxlY3Rvci5hZGRFeHRlcm5hbExpYnJhcnlEaXJlY3RvcnkocGF0aClcblxuXHRhZGRTb3VyY2VEaXJlY3Rvcnk6IChwYXRoKSA9PlxuXHRcdEBjb2xsZWN0b3IuYWRkU291cmNlRGlyZWN0b3J5KHBhdGgpXG5cblx0YWRkQXJnOiAoYXJnKSA9PlxuXHRcdEBjb2xsZWN0b3IuYWRkQXJnKGFyZylcblxuXHQjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCMgcHJvY2Vzc1xuXHQjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdGNyZWF0ZUJ1aWxkQ29tbWFuZDogKG91dHB1dCwgY29tcGxldGUpID0+XG5cdFx0Iy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQjIDAgZ2V0IGV4ZWMgZmlsZVxuXHRcdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0YmluID0gJ2NvbXBjJ1xuXG5cdFx0QGJ1aWxkLmdldFNES1ZlcnNpb24gKHZlcnNpb24pID0+XG5cdFx0XHRpZiBAYnVpbGQuaXNXaW5kb3coKVxuXHRcdFx0XHRpZiB2ZXJzaW9uID4gJzQuNi4wJ1xuXHRcdFx0XHRcdGJpbiA9ICdjb21wYy5iYXQnXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRiaW4gPSAnY29tcGMuZXhlJ1xuXG5cdFx0XHQjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0IyAxIGNyZWF0ZSBwYXRoIGFyZ3Ncblx0XHRcdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRhcmdzID0gW11cblxuXHRcdFx0YXJncy5wdXNoKEBidWlsZC53cmFwKCRwYXRoLmpvaW4oQGJ1aWxkLmdldEVudignRkxFWF9IT01FJyksICdiaW4nLCBiaW4pKSlcblxuXHRcdFx0Zm9yIGxpYnJhcnkgaW4gQGNvbGxlY3Rvci5nZXRMaWJyYXJpZXMoKVxuXHRcdFx0XHRhcmdzLnB1c2goJy1saWJyYXJ5LXBhdGggJyArIEBidWlsZC53cmFwKGxpYnJhcnkpKVxuXG5cdFx0XHRmb3IgbGlicmFyeSBpbiBAY29sbGVjdG9yLmdldEV4dGVybmFsTGlicmFyaWVzKClcblx0XHRcdFx0YXJncy5wdXNoKCctZXh0ZXJuYWwtbGlicmFyeS1wYXRoICcgKyBAYnVpbGQud3JhcChsaWJyYXJ5KSlcblxuXHRcdFx0Zm9yIGRpcmVjdG9yeSBpbiBAY29sbGVjdG9yLmdldFNvdXJjZURpcmVjdG9yaWVzKClcblx0XHRcdFx0YXJncy5wdXNoKCctc291cmNlLXBhdGggJyArIEBidWlsZC53cmFwKGRpcmVjdG9yeSkpXG5cblx0XHRcdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHQjIDIgY3JlYXRlIGluY2x1ZGUgY2xhc3NlcyBhcmdzXG5cdFx0XHQjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0QGNvbGxlY3Rvci5nZXRJbmNsdWRlQ2xhc3NlcyBAZmlsdGVyRnVuY3Rpb24sIChjbGFzc1BhdGhzKSA9PlxuXHRcdFx0XHRhcmdzLnB1c2goJy1pbmNsdWRlLWNsYXNzZXMgJyArIGNsYXNzUGF0aHMuam9pbignICcpKVxuXG5cdFx0XHRcdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdCMgMyBjcmVhdGUgbWFuaWZlc3QgZmlsZXNcblx0XHRcdFx0I1xuXHRcdFx0XHQjIG1hbmlmZXN0LnhtbCBzcGVjXG5cdFx0XHRcdCMgLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdCMgLW5hbWVzcGFjZSBodHRwOi8vc3Nlbi5uYW1lL25zL3NzZW4gbWFuaWZlc3QueG1sXG5cdFx0XHRcdCMgLWluY2x1ZGUtbmFtZXNwYWNlIGh0dHA6Ly9zc2VuLm5hbWUvbnMvc3NlblxuXHRcdFx0XHQjXG5cdFx0XHRcdCMgPGNvbXBvbmVudFBhY2thZ2U+XG5cdFx0XHRcdCMgXHQ8Y29tcG9uZW50IGlkPVwiU3RyaXBlXCIgY2xhc3M9XCJzc2VuLmNvbXBvbmVudHMuZmlsbHMuU3RyaXBlXCIvPlxuXHRcdFx0XHQjIDwvY29tcG9uZW50UGFja2FnZT5cblx0XHRcdFx0I1xuXHRcdFx0XHQjIG1hbmlmZXN0IG9iamVjdFxuXHRcdFx0XHQjIC0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdFx0IyAtIG5hbWVzcGFjZVsnaHR0cDovL3NzZW4ubmFtZS9ucy9zc2VuJ11bMF0gPSBcblx0XHRcdFx0IyBcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6J1N0cmlwZSdcblx0XHRcdFx0IyBcdFx0XHRcdFx0XHRcdFx0XHRcdHBhdGg6J3NzZW4uY29tcG9uZW50cy5maWxscy5TdHJpcGUnXG5cdFx0XHRcdCMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdEBjb2xsZWN0b3IuZ2V0TWFuaWZlc3QgKG5hbWVzcGFjZXMpID0+XG5cdFx0XHRcdFxuXHRcdFx0XHRcdG1hbmlmZXN0Q291bnQgPSAwXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Zm9yIG5hbWVzcGFjZSwgY29tcG9uZW50cyBvZiBuYW1lc3BhY2VzXG5cdFx0XHRcdFx0XHQjIGNyZWF0ZSBtYW5pZmVzdCBmaWxlIHNvdXJjZVxuXHRcdFx0XHRcdFx0bWFuaWZlc3RTb3VyY2UgPSAnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwidXRmLThcIj8+XFxuJ1xuXHRcdFx0XHRcdFx0bWFuaWZlc3RTb3VyY2UgKz0gJzxjb21wb25lbnRQYWNrYWdlPlxcbidcblx0XHRcdFx0XHRcdGZvciBjb21wb25lbnQgaW4gY29tcG9uZW50c1xuXHRcdFx0XHRcdFx0XHRpZiBjbGFzc1BhdGhzLmluZGV4T2YoY29tcG9uZW50LnBhdGgpID4gLTFcblx0XHRcdFx0XHRcdFx0XHRtYW5pZmVzdFNvdXJjZSArPSBcIjxjb21wb25lbnQgaWQ9JyN7Y29tcG9uZW50Lm5hbWV9JyBjbGFzcz0nI3tjb21wb25lbnQucGF0aH0nLz5cXG5cIiBcblx0XHRcdFx0XHRcdG1hbmlmZXN0U291cmNlICs9ICc8L2NvbXBvbmVudFBhY2thZ2U+J1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQjIHdyaXRlIG1hbmlmZXN0IGZpbGVcblx0XHRcdFx0XHRcdG1hbmlmZXN0RmlsZSA9IFwibWFuaWZlc3Qje21hbmlmZXN0Q291bnR9LnhtbFwiXG5cdFx0XHRcdFx0XHRmcy53cml0ZUZpbGVTeW5jKG1hbmlmZXN0RmlsZSwgbWFuaWZlc3RTb3VyY2UsIHtlbmNvZGluZzondXRmOCd9KVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQjIGFkZCBtYW5pZmVzdCBmaWxlIGluZm8gdG8gYXJncyBcblx0XHRcdFx0XHRcdGFyZ3MucHVzaChcIi1uYW1lc3BhY2UgI3tuYW1lc3BhY2V9ICN7bWFuaWZlc3RGaWxlfVwiKVxuXHRcdFx0XHRcdFx0YXJncy5wdXNoKFwiLWluY2x1ZGUtbmFtZXNwYWNlcyAje25hbWVzcGFjZX1cIilcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0bWFuaWZlc3RDb3VudCsrXG5cblx0XHRcdFx0XHQjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHRcdCMgNCBhcmdzLCBvdXRwdXRcblx0XHRcdFx0XHQjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHRcdGZvciBhcmcgaW4gQGNvbGxlY3Rvci5nZXRBcmdzKClcblx0XHRcdFx0XHRcdGFyZ3MucHVzaChAYnVpbGQuYXBwbHlFbnYoYXJnKSlcblx0XG5cdFx0XHRcdFx0YXJncy5wdXNoKCctb3V0cHV0ICcgKyBAYnVpbGQud3JhcChAYnVpbGQucmVzb2x2ZVBhdGgob3V0cHV0KSkpXG5cblx0XHRcdFx0XHRjb21wbGV0ZShhcmdzLmpvaW4oJyAnKSkgaWYgY29tcGxldGU/XG5cdFxuXHRjcmVhdGU6IChvdXRwdXQsIGNvbXBsZXRlKSA9PlxuXHRcdEBjcmVhdGVCdWlsZENvbW1hbmQgb3V0cHV0LCAoY29tbWFuZCkgLT5cblx0XHRcdGV4ZWMoY29tbWFuZCkucnVuKGNvbXBsZXRlKVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZsbGliIl19